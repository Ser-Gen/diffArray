<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>diffInline</title>
<style>

html,
body,
table {
	height: 100%
}
body {
	background: #eee;
	box-sizing: border-box;
	font: 12px sans-serif;
	margin: 0;
}
table {
	table-layout: fixed;
	width: 100%;
}
td {
	width: 33%;
	padding: 3px 4px;
	border: 1px solid transparent;
	vertical-align: top;
	font: 1em monospace;
	text-align: left;
	white-space: pre-wrap;
}
pre {
	margin: 0;
	white-space: pre-wrap;
}
h1 {
	display: inline;
	font-size: 100%;
}
del {
	background: #fadad7;
	color: #b30000;
	display: block;
	text-decoration: none;
}
ins {
	background: #eaf2c2;
	color: #406619;
	display: block;
	text-decoration: none;
}

[contentEditable] {
	background: #F9F9F9;
	border-color: #BBB #D9D9D9 #DDD;
	border-radius: 4px;
	-webkit-user-modify: read-write-plaintext-only;
	outline: none;
}
[contentEditable]:focus {
	background: #FFF;
	border-color: #6699cc;
	box-shadow: 0 0 4px #2175c9;
}

</style>
</head>
<body>

<table>
	<tr>
		<td contenteditable="true" id="a">aura restaurant</td>
		<td contenteditable="true" id="b">restaurant</td>
		<td><pre id="result"></pre></td>
	</tr>
</table>

<script src="diffInline.js"></script>
<script>

function proceed () {
	result.innerHTML = '';

	var diff = diffInline(a.textContent.split('\n'), b.textContent.split('\n'));
	var tmp = document.createDocumentFragment();

	diff.data.forEach(function (line) {
		if (line.type === 'new') {
			var elem = document.createElement('ins');

			elem.textContent = line.value;
			tmp.appendChild(elem);
		}
		else if (line.type === 'old') {
			var elem = document.createElement('del');

			elem.textContent = line.value;
			tmp.appendChild(elem);
		}
		else {
			var elem = document.createElement('div');

			elem.textContent = line.value;
			tmp.appendChild(elem);
		};
	});

	result.appendChild(tmp);
};

a.ondrop = b.ondrop = function (e) {
	e.preventDefault();

	var target = this;
	var file = e.dataTransfer.files[0];
	var reader = new FileReader();

	reader.onload = function (e) {
		target.textContent = e.target.result;
		proceed();
	};
	reader.readAsText(file);
};

a.onpaste = a.onchange =
b.onpaste = b.onchange = proceed;

if ('oninput' in a) {
	a.oninput = b.oninput = proceed;
} else {
	a.onkeyup = b.onkeyup = proceed;
};

window.onload = proceed;

</script>
</body>
</html>